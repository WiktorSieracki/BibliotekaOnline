<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Edit Book</title>
  <link
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
          rel="stylesheet"
  />
  <meta charset="UTF-8" />
</head>
<body>
<div th:replace="~{fragments :: header}"></div>
<div class="container mt-5">
  <h2>Create Book</h2>
  <form th:action="@{/books/edit/{id}(id=${book.id})}" th:object="${book}" method="post">
    <div class="form-group">
      <label for="title">Title:</label>
      <input
              type="text"
              id="title"
              th:field="*{title}"
              class="form-control"
      />
      <div th:if="${#fields.hasErrors('title')}" class="text-danger">
        <p th:each="err : ${#fields.errors('title')}" th:text="${err}"></p>
      </div>
    </div>
    <div class="form-group">
      <label for="authors">Authors:</label>
      <a href="/authors/create" class="btn btn-secondary mb-3"
      >Create Author</a
      >
      <select
              id="authors"
              th:field="*{authors}"
              class="form-control"
              multiple
      >
        <option
                th:each="newAuthor : ${allAuthors}"
                th:value="${newAuthor.id}"
                th:text="${newAuthor.name}"
        ></option>
      </select>
      <div th:if="${#fields.hasErrors('authors')}" class="text-danger">
        <p
                th:each="err : ${#fields.errors('authors')}"
                th:text="${err}"
        ></p>
      </div>
    </div>
    <div class="form-group">
      <label for="categories">Categories:</label>
      <select
              id="categories"
              th:field="*{categories}"
              class="form-control"
              multiple
      >
        <option
                th:each="newCategory : ${allCategories}"
                th:value="${newCategory}"
                th:text="${newCategory}"
        ></option>
      </select>
      <div th:if="${#fields.hasErrors('categories')}" class="text-danger">
        <p
                th:each="err : ${#fields.errors('categories')}"
                th:text="${err}"
        ></p>
      </div>
    </div>
    <div class="form-group">
      <label for="description">Description:</label>
      <textarea
              id="description"
              th:field="*{description}"
              class="form-control"
              rows="3"
      ></textarea>
      <div th:if="${#fields.hasErrors('description')}" class="text-danger">
        <p
                th:each="err : ${#fields.errors('description')}"
                th:text="${err}"
        ></p>
      </div>
    </div>
    <div class="form-group">
      <label for="publishedYear">Published Year:</label>
      <input
              type="number"
              id="publishedYear"
              th:field="*{publishedYear}"
              class="form-control"
      />
      <div
              th:if="${#fields.hasErrors('publishedYear')}"
              class="text-danger"
      >
        <p
                th:each="err : ${#fields.errors('publishedYear')}"
                th:text="${err}"
        ></p>
      </div>
    </div>
    <div class="form-group">
      <label for="numPages">Number of Pages:</label>
      <input
              type="number"
              id="numPages"
              th:field="*{numPages}"
              class="form-control"
      />
      <div th:if="${#fields.hasErrors('numPages')}" class="text-danger">
        <p
                th:each="err : ${#fields.errors('numPages')}"
                th:text="${err}"
        ></p>
      </div>
    </div>
    <div class="form-group">
      <label for="thumbnail">Thumbnail URL:</label>
      <input
              type="text"
              id="thumbnail"
              th:field="*{thumbnail}"
              class="form-control"
      />
      <div th:if="${#fields.hasErrors('thumbnail')}" class="text-danger">
        <p
                th:each="err : ${#fields.errors('thumbnail')}"
                th:text="${err}"
        ></p>
      </div>
    </div>
    <button type="submit" class="btn btn-primary mt-2">Save</button>
  </form>
</div>
<div th:replace="~{fragments :: footer}"></div>
</body>
</html>
